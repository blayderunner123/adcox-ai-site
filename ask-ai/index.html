<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Adcox.AI — Ask AI</title>

  <!-- Bootstrap 5 (CSS) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <!-- Favicons (root-relative so they work from /ask-ai/) -->
  <link rel="shortcut icon" type="image/x-icon" href="/favicon/favicon.ico"/>
  <link rel="icon" type="image/png" href="/favicon/favicon.png"/>
  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png"/>
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png"/>
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png"/>
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png"/>
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png"/>
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/>
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/>
  <link rel="manifest" href="/favicon/manifest.json"/>
  <meta name="msapplication-TileColor" content="#0a0a0a"/>
  <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png"/>
  <meta name="theme-color" content="#0a0a0a"/>

  <!-- Open Graph / preview -->
  <meta property="og:title" content="Adcox.AI — Ask AI"/>
  <meta property="og:site_name" content="Adcox.AI"/>
  <meta property="og:url" content="https://www.adcox.ai/ask-ai/"/>
  <meta property="og:description" content="Ask a question. The function does the talking; the browser keeps your secrets."/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://www.adcox.ai/favicon/og-preview.png"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:image" content="https://www.adcox.ai/favicon/og-preview.png"/>

  <!-- Structured Data: reuse Person + Website -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Person",
        "@id": "https://www.adcox.ai/#jr-adcox",
        "name": "Jonathan R. Adcox",
        "givenName": "Jonathan",
        "familyName": "Adcox",
        "url": "https://www.adcox.ai",
        "image": "https://www.adcox.ai/favicon/android-icon-192x192.png",
        "jobTitle": "Enterprise Applications Wrangler",
        "email": "mailto:jonathan.r.adcox@gmail.com",
        "worksFor": {
          "@type": "Organization",
          "name": "Soldier-up Designs",
          "url": "https://soldierupdesign.com"
        },
        "knowsAbout": [
          "PowerShell","Azure Logic Apps","Microsoft Graph","SharePoint (2010/2013/Online)",
          "Power BI","REST APIs","Process Automation","Systems Integration",
          "C#","ASP.NET / WebForms","Entity Framework","SQL Server","T-SQL",
          "HTML5","CSS3","JavaScript (ES5/ES6)","jQuery","Node.js","AngularJS",
          "WordPress","Joomla","Drupal","SFTP","RightFax","Concur","Multiview",
          "Lean Six Sigma","Knowledge Management"
        ],
        "sameAs": [
          "https://github.com/blayderunner123",
          "https://linkedin.com/in/blayderunner123",
          "https://soldierupdesign.com"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://www.adcox.ai/#website",
        "url": "https://www.adcox.ai",
        "name": "Adcox.AI",
        "inLanguage": "en",
        "publisher": { "@id": "https://www.adcox.ai/#jr-adcox" }
      }
    ]
  }
  </script>

  <!-- Shared theme styles copied from main -->
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa7bf; --accent:#7dd3fc; --teal:#14b8a6;
    }
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(125,211,252,.06), transparent 10%),
                  linear-gradient(180deg, #071028 0%, var(--bg) 100%);
      color:#e6eef8;
    }
    .hero-card{
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255,255,255,0.18);
    }
    .muted{ color:#d9e5ff; }
    .text-secondary{ color:#bcd1ff !important; }
    .section-title{ color:#eaf1ff; letter-spacing:.02em; }
    a.link-light, .navbar-dark .navbar-nav .nav-link{ color:#eaf1ff; }
    a.link-light:hover, .navbar-dark .navbar-nav .nav-link:hover{ color:#ffffff; }
    .btn-outline-light{ color:#eaf1ff; border-color:#cfe0ff; }
    .btn-outline-light:hover{ background:#cfe0ff; color:#0b1220; }
    .badge.text-bg-info{ color:#0b1220; }

    /* Page-specific small layout helpers */
    .wrap{ max-width:840px; margin:2rem auto; }
    .answer{ white-space:pre-wrap; line-height:1.45; }
  </style>
</head>
<body>
  <!-- Navbar (root-relative links for consistency) -->
  <nav class="navbar navbar-expand-md navbar-dark" style="background:rgba(0,0,0,.25)">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">ADCOX.AI</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="/#resume">Résumé</a></li>
          <li class="nav-item"><a class="nav-link" href="/#work">Adventures</a></li>
          <li class="nav-item"><a class="nav-link" href="/#weekly">Weekly</a></li>
          <li class="nav-item"><a class="nav-link" href="/#contact">Contact</a></li>
          <li class="nav-item ms-2">
            <a class="nav-link active" aria-current="page" href="/ask-ai/">Ask AI</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Ask AI content -->
  <main class="wrap">
    <h1 class="h4 mb-2">Ask AI</h1>
    <p class="small text-secondary mb-3">
      This page calls your Appwrite Function, which calls the model server-side. Your API key never touches the browser.
    </p>

    <form id="ask-form" class="d-flex gap-2 mb-3">
      <input id="q" class="form-control" type="text" placeholder="Ask a question…" autocomplete="off"/>
      <button id="submit" class="btn btn-info fw-bold" type="submit">Ask</button>
    </form>

    <div class="text-secondary small mb-2" id="status">Idle.</div>

    <div class="card hero-card">
      <div class="card-body">
        <div class="answer" id="answer">Ask something to get started.</div>
      </div>
    </div>
  </main>

  <!-- Footer (same as main) -->
  <footer class="py-4">
    <div class="container text-center muted small">
      © <strong>Jonathan R. Adcox</strong>, traces of humor included, commas preferred.
    </div>
  </footer>

  <!-- Bootstrap JS bundle (navbar toggler needs this) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous">
  </script>

  <!-- Ask AI script -->
  <script>
    const form = document.getElementById('ask-form');
    const input = document.getElementById('q');
    const answerEl = document.getElementById('answer');
    const statusEl = document.getElementById('status');
    const submitBtn = document.getElementById('submit');

    const FN_URL = 'https://68dfe975002e94119063.nyc.appwrite.run/';

    async function askAI(e){
      e.preventDefault();
      const q = (input.value || '').trim();
      if(!q){
        answerEl.textContent = 'Please enter a question.';
        return;
      }

      submitBtn.disabled = true;
      statusEl.textContent = 'Sending…';
      answerEl.textContent = 'Thinking…';

      try{
        const res = await fetch(FN_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ q })
        });

        const data = await res.json().catch(() => ({}));

        if(!res.ok){
          statusEl.textContent = `Error`;
          answerEl.textContent = `Error: ${res.status} – ${data.error || 'Unknown'}`;
          console.error('Server error details:', data);
          return;
        }

        statusEl.textContent = 'Done.';
        answerEl.textContent = data.answer ?? '(no answer returned)';
      }catch(err){
        statusEl.textContent = 'Network issue';
        answerEl.textContent = 'Network error. Open DevTools for details.';
        console.error(err);
      }finally{
        submitBtn.disabled = false;
      }
    }

    form.addEventListener('submit', askAI);
  </script>
</body>
</html>