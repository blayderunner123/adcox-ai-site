<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Adcox.AI — Metrics API</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <meta name="theme-color" content="#0a0a0a"/>
  <style>
    body {
      background: radial-gradient(1200px 600px at 10% 10%, rgba(125,211,252,.06), transparent 10%),
                  linear-gradient(180deg, #071028 0%, #0f1724 100%);
      color: #e6eef8;
    }
    .container { max-width: 800px; padding-top: 3rem; }
    .card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.15); border-radius: 10px; }
    pre { white-space: pre-wrap; color: #cde6ff; }
  </style>
</head>
<body>
  <!-- Minimal navbar to match site -->
  <nav class="navbar navbar-expand-md navbar-dark" style="background:rgba(0,0,0,.25)">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">ADCOX.AI</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
	  <div id="nav" class="collapse navbar-collapse">
		<ul class="navbar-nav ms-auto">
		  <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
		  <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
		  <li class="nav-item"><a class="nav-link" href="/#resume">Résumé</a></li>
		  <li class="nav-item"><a class="nav-link" href="/#work">Adventures</a></li>
		  <li class="nav-item"><a class="nav-link" href="/#weekly">Weekly</a></li>
		  <li class="nav-item"><a class="nav-link" href="/#contact">Contact</a></li>
		  <li class="nav-item"><a class="nav-link" href="/ask-ai/">Ask AI</a></li>
		  <li class="nav-item"><a class="nav-link" href="/qr-brand/">QR Maker</a></li>
		  <li class="nav-item"><a class="nav-link active" aria-current="page" href="/metrics-api/">Metrics</a></li>
		</ul>
	  </div>
	</div>
  </nav>

  <main class="container">
    <h1 class="mb-3">Metrics API Test Console</h1>
    <p class="text-secondary">Send test events to your Appwrite function endpoint and see JSON responses below.</p>

    <div class="card p-3 mb-4">
      <form id="metrics-form" class="d-flex flex-wrap gap-2 align-items-center">
        <input id="event" class="form-control" placeholder="Event name (e.g., pageview)" value="pageview" style="max-width:18ch;">
        <input id="value" type="number" class="form-control" placeholder="Value" value="1" style="max-width:10ch;">
        <button id="send" type="submit" class="btn btn-outline-light">Send Event</button>
        <button id="ping" type="button" class="btn btn-outline-info">Ping (GET)</button>
      </form>
    </div>

    <h5>Response</h5>
    <pre id="output">– Waiting –</pre>
  </main>

  <script>
    const endpoint = 'https://68e6787d002ae8594c92.nyc.appwrite.run/';
    const output = document.getElementById('output');
    const form = document.getElementById('metrics-form');
    const eventInput = document.getElementById('event');
    const valueInput = document.getElementById('value');
    const sendBtn = document.getElementById('send');
    const pingBtn = document.getElementById('ping');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      output.textContent = 'Sending...';
      try {
        const res = await fetch(endpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            event: eventInput.value.trim() || 'pageview',
            value: Number(valueInput.value) || 1
          })
        });
        const json = await res.json();
        output.textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        output.textContent = String(err);
      }
    });

    pingBtn.addEventListener('click', async () => {
      output.textContent = 'Pinging...';
      try {
        const res = await fetch(endpoint);
        const json = await res.json();
        output.textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        output.textContent = String(err);
      }
    });
  </script>
</body>
</html>